---
sidebar_label: 会话路由
sidebar_position: 43
---

# 会话路由

本页用于解释「访客发起会话」后，系统如何把会话分配给合适的接待对象（客服/工作组/机器人）。
不需要懂技术，按下面的“像点外卖一样的流程”理解即可：

1. 先确定入口：访客从哪个入口进入（某个工作组、某个客服、统一入口等）
2. 再按规则分配：如果是工作组接待，就按“工作组路由模式”选一个当前可接待的客服
3. 如果没人可接：按“备选接待”兜底（可选）
4. 如果你需要更灵活：用“统一入口自定义路由”按条件做智能分流（可选）

> 说明：本文用“会话”泛指访客与客服/机器人之间的一次沟通线程。

## 基本路由

![router_basic](/img/router/router_basic.png)

### 基本路由在做什么？

当访客进入某个「工作组」时，系统会先拿到这个工作组里“当前可接待”的客服列表（例如在线且可接待）。
然后按你为工作组选择的“路由模式”，从这些客服里选出一个作为本次会话的接待人。

你可以把它理解成：

- 工作组 = 一支客服小队
- 路由模式 = 这支小队“怎么分单”的规则

### 工作组路由模式（通俗解释）

下面这些模式对应你在工作组里可选的分配方式（名称可能在后台显示为中文或英文，含义一致）：

| 模式 | 适合什么场景 | 系统怎么选 | 举例 |
| --- | --- | --- | --- |
| 轮询（Round-robin） | 客服能力差不多，追求“公平” | 按顺序一个接一个分配 | A → B → C → A… |
| 最小会话数（Least active） | 想让大家负载更均衡 | 选当前手上会话最少的人 | 谁更“空”给谁 |
| 随机（Random） | 简单场景、临时用 | 随便抽一个可接待客服 | 抽签 |
| 加权随机（Weighted random） | 希望服务质量更好 | 评分/权重高的人更容易被分到 | “更强的人更常接到单” |
| 一致性分配（Consistent） | 希望同一访客尽量找回同一个客服 | 同一访客会更倾向分到同一位客服（如果仍可接待） | 老客户更连贯 |
| 最快响应（Fastest） | 强调响应速度 | 选平均响应更快的人 | 谁更快谁接 |
| 广播/抢单（Broadcast） | 需要“谁抢到算谁”的业务 | 把机会发给所有可接待客服，由客服抢 | 多人同时看到、先抢先得 |
| 熟客优先/最近接待（Recent） | 强调延续服务关系 | 优先分给最近接待过该访客的客服 | “上次谁接的这次还给谁” |
| 智能分配（AI/LLM） | 需要按技能/语义/历史做智能分配 | 由智能模型综合判断分给谁（需你配置好相关能力/数据） | “智能路由” |
| 人工手动（Manual） | 希望完全人工控制 | 系统不自动分配，等待人工操作/指定 | 手动派单 |

### 系统“选人”时的几个关键点（不用懂代码也能理解）

- 只在“可接待的人”里选：离线/不可接待的人不会被分到。
- 尽量稳定：系统会提前算好“下一位要接的人”，这样不会因为多人同时进来而乱序。
- 分配后会自动推进：每成功分配一次，会把“下一位”更新到后面，保证规则持续生效。

> 小提示：如果你的目标是“新客平均分配”，优先选【轮询】或【最小会话数】；如果目标是“老客连续服务”，优先选【熟客优先/最近接待】或【一致性分配】。

### 一分钟选型（不会选就按这个来）

- 想“公平排队” → 选【轮询】
- 想“谁更空谁接” → 选【最小会话数】
- 想“老客户尽量找回同一人” → 选【熟客优先/最近接待】（首选）或【一致性分配】
- 想“提高响应速度” → 选【最快响应】
- 想“让客服抢单” → 选【广播/抢单】
- 你有明确的技能/业务线，想做更智能分配 → 选【大模型决定】或用后面的【自定义会话路由】

## 备选路由

![router_backup](/img/router/router_backup.png)

### 备选路由是做什么的？

备选路由是“兜底方案”。当默认接待对象暂时无法接待时（例如：一对一客服离线、工作组无人在线），系统可以自动把会话切到你指定的“备选客服”或“备选工作组”。

你可以把它理解成：

> “如果 A 不行，就转给 B；如果 B 也不行，就转给 C。”

### 备选接待怎么用（面向配置人员的说明）

在“留言/离线相关设置”中，通常会看到两类兜底选项（名称以系统实际界面为准）：

- 备选客服：打开后，选择一位“兜底客服/值班客服”
- 备选工作组：打开后，选择一个“兜底工作组/总值班组”

你只需要在后台界面里选择即可，一般不需要填写任何内部字段。

### 推荐配置方式（最简单）

1. 你只有一个明确的兜底人：开启【备选客服】，选择一个“值班客服/总客服”。
2. 你希望兜底给一组人：开启【备选工作组】，选择“总值班组/兜底组”。
3. 不建议同时乱配：如果同时开启了备选客服和备选工作组，请在你的运营流程里明确优先级（例如先备选客服、再备选工作组），避免实际接待路径让你困惑。

### 常见场景举例

- 场景 A：店铺专属客服离线
	- 默认：访客找“专属客服”
	- 兜底：自动转给“值班客服”

- 场景 B：某个工作组临时无人在线
	- 默认：访客进入“售前组”
	- 兜底：自动转到“总客服组”

> 备注：备选路由通常与“留言”能力一起使用：当无人在线时，既可以引导留言，也可以转到可接待的备选对象，提升接通率。

### 运营速查：备选到底怎么配？

| 你想实现的效果 | 建议开关 | 建议填写/选择 |
| --- | --- | --- |
| “专属客服不在就找值班客服” | 开启备选客服 | 选择一个值班客服 |
| “某个组没人就转到总客服组” | 开启备选工作组 | 选择一个兜底工作组 |
| “没人在线就先留言，不自动转接” | 关闭备选客服/备选工作组 | 不填 |

## 自定义会话路由

![router_custom](/img/router/router_custom.png)

### 什么时候需要“自定义会话路由”？

如果你的入口不止一个工作组，或者你希望按条件把访客分流（例如：不同渠道、不同地区、不同关键词、不同产品线），就需要“统一入口 + 路由规则”。

你可以把它理解成：

> 一个“总入口”，里面放一组“如果…就…”的规则，从上到下依次判断。

### 自定义路由由什么组成？（对应系统里的概念）

在统一入口配置里，系统保存的是一组“路由规则”（一条条规则列表）：

- 每条规则通常包含：
	- 规则名称、规则说明：给人看的
	- 启用开关：开/关
	- 优先级：数字越小越先执行
	- 匹配方式：
		- 全部满足：必须满足所有条件才算命中
		- 满足任意：满足任意一个条件就算命中
	- 条件：你要判断的内容（例如渠道=官网、来源=广告、关键词=退款…）
	- 命中后动作：命中时要转到哪里
	- 未命中动作（可选）：不命中时要做什么（通常不填，继续看下一条规则）

同时，统一入口还支持一个“默认接待目标”，用于所有规则都没命中时的兜底。

### 系统执行顺序（非常重要）

1. 先看是否开启默认路由：默认路由通常相当于“兜底第一层”（如果当前目标不能接待，继续往下走）。
2. 再按优先级从小到大执行规则：每次命中就按该规则的动作去路由。
3. 如果某条规则命中但目标暂时不可接待：通常会继续尝试下一条规则（这样你能写出“优先 A，不行再 B”的链路）。

### 给普通运营的写法模板（复制思路即可）

**模板 1：按渠道分流**

- 规则 1（优先级 1）：如果渠道=抖音 → 转到「抖音组」
- 规则 2（优先级 2）：如果渠道=公众号 → 转到「公众号组」
- 规则 99（默认路由）：其他所有 → 转到「售前组」

**模板 2：先 VIP，再普通**

- 规则 1：如果访客标签=VIP → 转到「VIP 专席」
- 规则 2：其他 → 转到「普通客服组」

**模板 3：先机器人接待，复杂问题再转人工**

- 默认路由：先到「机器人」
- 规则 10：如果触发“转人工关键词/按钮” → 转到「人工工作组」

### 配置建议（少走弯路）

- 从 3 条以内开始：先做“渠道分流 + 兜底”，跑顺了再加更多条件。
- 优先级用 10、20、30…：便于后面插规则，不用全局改数字。
- 兜底一定要有：要么开启默认路由，要么最后留一条“全部匹配”的规则。

### 运营速查：自定义路由的“最小可用方案”

如果你只想要一个“统一入口”，并且能按渠道分流，建议这样配（最稳、最不容易出错）：

1. 打开“默认路由”，把默认目标设置成你最常用的接待目标（通常是一个工作组）。
2. 新建 1~3 条规则，优先级用 10/20/30：
	- 10：渠道=抖音 → 抖音组
	- 20：渠道=公众号 → 公众号组
	- 30：渠道=官网 → 售前组
3. 不要在每条规则里都设置“未命中动作”，让系统继续执行下一条即可。

---

## 速查表（概念 ↔ 配置项 ↔ 你会在界面看到什么）

> 说明：不同版本后台的菜单名可能略有不同，下表描述的是“概念层面”对应关系。

| 你在文档里看到的概念 | 你需要配置的内容（面向用户） | 通常在后台界面里长什么样 |
| --- | --- | --- |
| 工作组路由模式 | 在工作组里选择一种“分配方式” | “工作组设置 → 路由模式/分配方式”下拉框 |
| 备选客服 | 打开“备选客服”，并选择一位兜底客服 | “离线/留言/兜底 → 备选客服”开关 + 客服选择器 |
| 备选工作组 | 打开“备选工作组”，并选择一个兜底工作组 | “离线/留言/兜底 → 备选工作组”开关 + 工作组选择器 |
| 统一入口默认路由 | 打开“默认接待目标”，并选择默认接待对象（客服/工作组/机器人） | “统一入口 → 默认接待目标”开关 + 目标选择 |
| 统一入口路由规则列表 | 新建规则：设定优先级、条件、命中后转到哪里 | “统一入口 → 路由规则”列表（可排序/启用/编辑） |

## 常见问题（FAQ）

### Q1：为什么我选了轮询，还是感觉不平均？

轮询只会在“当前可接待的人”里轮询。如果某些客服经常离线/不可接待，就会被跳过，看起来就不平均。

### Q2：备选客服/备选工作组会不会导致“绕过留言”？

可能会。如果你希望“无人在线就必须留言”，就不要开启备选兜底；如果你希望“尽量接通”，就开启备选兜底。

### Q3：自定义路由规则写多了怕乱，怎么避免？

遵循三个原则：

- 规则尽量少：先 3 条以内跑通
- 优先级留空位：10/20/30，方便插入
- 兜底明确：默认路由或最后一条“全部匹配”

