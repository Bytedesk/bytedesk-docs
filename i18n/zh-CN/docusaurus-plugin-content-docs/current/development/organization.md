---
sidebar_label: 组织管理
sidebar_position: 48
---

# 组织管理

微语（Bytedesk）里的“组织”，可以理解为一个独立的企业/团队空间。一个组织用来管理：

- 组织是否可用（启用/禁用）
- 会员是否在有效期内（可选择到期后是否限制登录）
- 组织规模上限（例如允许同时登录的成员数、坐席数、工作组数）

当用户登录后，系统会根据“当前所在组织”的状态做检查，决定是否允许继续使用。

## 组织的核心信息

组织有一些基础信息，用于展示与搜索：

- 组织名称
- 组织头像/Logo
- 组织编码（便于搜索）
- 组织描述

## 组织状态：启用/禁用

组织可以被设置为“启用”或“禁用”。

当组织被禁用时，成员登录后：

- 会看到提示：组织已禁用
- 点击确定后，系统会自动退出登录（避免继续使用）

## 会员有效期：到期后是否禁止登录

组织可以设置“会员截止日期”（也可以理解为组织有效期）。同时，还可以选择：到期后是否要限制登录。

规则如下：

1. 如果关闭“到期后限制登录”：即使到期，也不强制拦截登录。
2. 如果开启“到期后限制登录”，且当前时间已超过截止日期：成员登录后会看到提示“组织已过期/不在有效期内”，点击确定后系统自动退出登录。

## 默认组织的特殊规则

系统内置一个“默认组织”，主要用于内置与兼容场景。

默认组织有两条特殊规则：

- 不做“到期限制登录”检查：不会因为组织有效期到期而限制登录
- 不允许把默认组织设置为不可用：不允许对默认组织设置“禁用”或“到期后限制登录”等会导致无法使用的状态

## 组织配额：成员/坐席/工作组上限

组织可以限制规模与资源上限（可理解为“配额”）：

- 成员上限（默认 20）
- 客服坐席上限（默认 20）
- 工作组上限（默认 20）

### 登录时的成员数检查

系统会记录登录情况，并在用户登录后检查：

- 当前组织“正在登录使用的成员数量”是否超过成员上限

如果超过：

- 会弹窗提示：超过允许登录最大成员数
- 点击确定后系统自动退出登录

说明（多端登录口径）：

- 同一个人即使在多个设备同时登录，也只算 1 个成员

## 登录后检查顺序

当用户登录并加载到“当前组织”信息后，建议按以下顺序做检查：

1. 如果当前组织是默认组织：跳过“禁用”和“到期限制登录”的检查（但仍可展示组织基础信息）。
2. 如果组织已禁用：提示“组织已禁用”，确定后退出登录。
3. 如果开启了“到期后限制登录”，且已到期：提示“组织已过期/不在有效期内”，确定后退出登录。
4. 如果当前已登录成员数超过成员上限：提示“超过允许登录最大成员数”，确定后退出登录。

:::info 开发备注

- 当前组织：`userInfo.currentOrganization`
- 默认组织 UID：`df_org_uid`（`BytedeskConsts.DEFAULT_ORGANIZATION_UID`）
- 状态字段：`enabled`
- 有效期字段：`vipExpireDate`、`vip`
- 到期限制开关：`vipExpireLoginCheckEnabled`
- 成员上限字段：`maxMembers`（同一用户多端登录按 1 个成员统计）

:::

## 常见问题

### 1）组织被禁用后，成员能否继续使用？

不能。成员登录后会被提示组织已禁用，并在确认后自动退出登录。

### 2）组织过期后一定会禁止登录吗？

不一定。是否禁止登录取决于是否开启了“到期后限制登录”：开启则限制登录，关闭则不强制限制。

### 3）为什么同一用户多端登录只算一个成员？

成员上限用于限制组织内“独立成员数量”，避免把同一个人的多端使用误判为多个成员。
